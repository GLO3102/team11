<div class="container middlePage" id="browse_genre">
</div>
<br>
<div class='container' id='browseContainer'>
<div class="container">
    <div id="followSuccess" class="alert alert-success" role="alert" hidden>You <strong>follow</strong>
        <% if (typeof results[0]!= 'undefined'){ %>
        <%= results[0].name %> !
        <% } else{ %>
        <%= results[1].name %>
        <% } %>
    </div>
    <div id="followError" class="alert alert-danger" role="alert" hidden>You <strong>already</strong> follow this user !
    </div>
    <div id="errorUnexpected" class="alert alert-danger" role="alert" hidden><strong>Unexpected</strong> error !</div>

    <div id="unfollowSuccess" class="alert alert-success" role="alert" hidden>You <strong>unfollow</strong>
        <% if (typeof results[0]!= 'undefined'){ %>
        <%= results[0].name %> !
        <% } else{ %>
        <%= results[1].name %>
        <% } %>
    </div>

    <% if(genres.length > 0){ %>
    <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
            Genres <span class="caret"></span>
        </button>

        <ul class="dropdown-menu">
            <li><input id="allFilter" type="checkbox" checked>All</li>
            <li role="separator" class="divider"></li>
            <% _.each(genres,function(genre){ %>
            <li><input class="genreFilter" type="checkbox"><%= genre %></li>
            <% }); %>
        </ul>

    </div>
    <% } %>
    <div class="row">
        <% var index = 0;  %>
        <% _.each(results,function(data){ %>
        <% if (index < 4){ %>
        <% index++ %>
        <% } else { %>
        <% index = 0 %>
    </div>
    <div class="row">
        <% } %>

        <div class="col-sm-6 col-md-4 datazone ">
            <div class="thumbnail">
                <% if(data.type === "track"){ %>
                    <p class="track-type"><label id="<%= data.trackId %>" onclick="addToWatchlist(<%=data.trackId%>)" class="glyphicon glyphicon-star-empty addTo"></label><span>MOVIE</span></p>
                <% }else if(data.type === "artist"){%>
                <p class="track-type actor_ribbon">ACTOR</p>
                <% }else if(data.type === "user"){   %>
                <p class="track-type user"><label data-id="<%= data.trackId %>" class="glyphicon glyphicon-star-empty addToUser"></label><span>USER</span>
                </p>
                <% }else{%>
                    <p class="track-type tvshow">TV SHOW</p>
                <% } %>
                <% if (data.type === "artist"){
                getImageActor(data.title, function(src_url){
                $('.picturezone').attr('src',src_url);
                });
                }
                %>
                <img src="<% if(data.type != 'artist'){ print(formatImageSize(data.artworkUrl100, 230))} %>"
                     class="picturezone" >

                <div class="caption">
                    <h3 class="title-limit"><a href="<%=  data.url  %>" class="title-limit"> <%= data.title %></a></h3>

                    <p class="title-limit"><%= data.by %></p>
                    <p><%= data.shortDesc %></p></br>
                </div>
            </div>
        </div>

        <% }) %>
    </div>
</div>

<div id="modalWatchlist" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add to watchlist</h4>
            </div>
            <div class="modal-body">
                <div id="watchlist-named">
                    <b>Select a watchlist</b>
                    <div id="noId" class="alert alert-danger" hidden>Please <strong>select</strong> a watchlist !</div>
                    <ul class="list-inline">
                        <% _.each(watchlist, function(data) { %>
                        <% if(data.owner.id === idUser){ %>
                        <li>
                            <input type="radio" name="watchlistName" value="<%= data.id %>" class="radio-watch"/> <%= data.name %>
                        </li>
                        <% } %>
                        <% }) %>
                    </ul>
                    <br>
                    <span id="idOfMovie" hidden></span>
                    <button type="button" class="btn btn-default" id="addWatchlist">Add</button><br><br>
                    <div class="alert alert-danger" id="alert-danger" hidden>
                        You <strong>can't</strong> add the same movie twice
                    </div>
                    <div class="alert alert-success" id="alert-success" hidden>
                        <strong>Success ! </strong>Your movie have been added to your watchlist
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
</div>
